(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(15),r=t.n(o),c=t(6),a=t(3),u=t(2),s=t(0),i=function(e){var n=e.person,t=e.handleRemove;return Object(s.jsxs)("li",{className:"note",children:[n.name," / ",n.number," / ",n.id," / ",Object(s.jsx)("button",{type:"button",className:"button",onClick:function(){return t(n.id)},children:"Remove"})]})},l=function(e){var n=e.numbers,t=e.handleRemove;return Object(s.jsx)(s.Fragment,{children:n.map((function(e){return Object(s.jsx)(i,{person:e,handleRemove:t},e.id)}))})},d=function(e){var n=e.addPerson,t=e.newName,o=e.handleName,r=e.newNumber,c=e.handleNumber;return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["Name: ",Object(s.jsx)("input",{value:t,onChange:o})]}),Object(s.jsxs)("div",{children:["Number: ",Object(s.jsx)("input",{value:r,onChange:c})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"Add a new person"})})]})})},m=function(e){var n=e.newFilter,t=e.handleName;return Object(s.jsxs)("div",{children:["Filter: ",Object(s.jsx)("input",{value:n,onChange:t})]})},b=function(e){var n=e.message;return null==n?null:Object(s.jsx)("div",{className:"error",children:n})},f=t(4),j=t.n(f),h="/api/persons",p=function(){var e=j.a.get(h);return console.log("persons.js / getAll / request",e),e.then((function(e){return e.data}))},O=function(e){return j.a.post(h,e).then((function(e){return e.data}))},v=function(e,n){var t=j.a.put("".concat(h,"/").concat(e),n);return console.log("persons.js / update / request",t),t.then((function(e){return e.data}))},g=function(e){var n=j.a.delete("".concat(h,"/").concat(e));return console.log("persons.js / remove / request",n),n.then((function(e){return e.data}))},x=(t(39),function(e){var n=Object(u.useState)([]),t=Object(a.a)(n,2),o=t[0],r=t[1],i=Object(u.useState)(""),f=Object(a.a)(i,2),j=f[0],h=f[1],x=Object(u.useState)(""),N=Object(a.a)(x,2),w=N[0],S=N[1],k=Object(u.useState)(""),y=Object(a.a)(k,2),P=y[0],R=y[1],C=Object(u.useState)(null),F=Object(a.a)(C,2),J=F[0],T=F[1];Object(u.useEffect)((function(){p().then((function(e){r(e)}))}),[]);var q=function(e){console.log(o),console.log("FindPerson input:",e);var n=o.find((function(n){return n.name===e}));return console.log("Found:",n),n};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(d,{addPerson:function(e){if(e.preventDefault(),""!==j){var n={name:j,number:w};if(q(j)){if(window.confirm("'".concat(j,"' is already added to phonebook. Replace the number with a new one?"))){var t=o.find((function(e){return e.name===j})),a=Object(c.a)(Object(c.a)({},t),{},{number:w}),u=t.id;v(u,a).then((function(e){r(o.map((function(n){return n.id===u?e:n}))),T("Person '".concat(e.name,"' number changed!")),setTimeout((function(){T(null)}),5e3)})).catch((function(e){T("".concat(JSON.stringify(e.response.data.error))),console.log(e.response.data),setTimeout((function(){T(null)}),5e3)}))}console.log("Number update cancelled")}else O(n).then((function(e){r(o.concat(e)),T("Person '".concat(n.name,"' added!")),setTimeout((function(){T(null)}),5e3)})).catch((function(e){JSON.stringify(e.response.data.error);T("".concat(JSON.stringify(e.response.data.error))),console.log(e.response.data),setTimeout((function(){T(null)}),5e3)})),console.log("New person added to phonebook:",n),h(""),S(""),R(""),console.log("Fields reset")}},name:j,handleName:function(e){h(e.target.value)},number:w,handleNumber:function(e){S(e.target.value)}}),Object(s.jsx)(b,{message:J}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(m,{name:P,handleName:function(e){R(e.target.value)}}),Object(s.jsx)("ul",{children:Object(s.jsx)(l,{numbers:""===P?o:o.filter((function(e){return e.name.toUpperCase().includes(P.toUpperCase())})),handleRemove:function(e){console.log("app.js / handleRemove / id:",e);var n=o.find((function(n){return n.id===e}));window.confirm("Remove '".concat(n.name,"' from phonebook?"))&&g(e).then((function(){var t=o.filter((function(n){return n.id!==e}));r(t),console.log("Person '".concat(n.name,"' removed from phonebook")),T("Person '".concat(n.name,"' removed from phonebook")),setTimeout((function(){T(null)}),5e3)})).catch((function(e){T("".concat(JSON.stringify(e.response.data.error))),setTimeout((function(){T(null)}),5e3)}))}})})]})});r.a.render(Object(s.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.172718af.chunk.js.map
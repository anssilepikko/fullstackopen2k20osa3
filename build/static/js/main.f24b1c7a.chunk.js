(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(15),c=t.n(o),r=t(6),a=t(3),u=t(2),s=t(0),i=function(e){var n=e.person,t=e.handleRemove;return Object(s.jsxs)("li",{className:"note",children:[n.name," / ",n.number," / ",n.id," / ",Object(s.jsx)("button",{type:"button",className:"button",onClick:function(){return t(n.id)},children:"Remove"})]})},l=function(e){var n=e.numbers,t=e.handleRemove;return Object(s.jsx)(s.Fragment,{children:n.map((function(e){return Object(s.jsx)(i,{person:e,handleRemove:t},e.id)}))})},d=function(e){var n=e.addPerson,t=e.newName,o=e.handleName,c=e.newNumber,r=e.handleNumber;return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["Name: ",Object(s.jsx)("input",{value:t,onChange:o})]}),Object(s.jsxs)("div",{children:["Number: ",Object(s.jsx)("input",{value:c,onChange:r})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"Add a new person"})})]})})},m=function(e){var n=e.newFilter,t=e.handleName;return Object(s.jsxs)("div",{children:["Filter: ",Object(s.jsx)("input",{value:n,onChange:t})]})},b=function(e){var n=e.message;return null==n?null:Object(s.jsx)("div",{className:"error",children:n})},j=t(4),f=t.n(j),h="/api/persons",p=function(){var e=f.a.get(h);return console.log("persons.js / getAll / request",e),e.then((function(e){return e.data}))},v=function(e){return f.a.post(h,e).then((function(e){return e.data}))},O=function(e,n){var t=f.a.put("".concat(h,"/").concat(e),n);return console.log("persons.js / update / request",t),t.then((function(e){return e.data}))},g=function(e){var n=f.a.delete("".concat(h,"/").concat(e));return console.log("persons.js / remove / request",n),n.then((function(e){return e.data}))},x=(t(39),function(e){var n=Object(u.useState)([]),t=Object(a.a)(n,2),o=t[0],c=t[1],i=Object(u.useState)(""),j=Object(a.a)(i,2),f=j[0],h=j[1],x=Object(u.useState)(""),N=Object(a.a)(x,2),w=N[0],k=N[1],S=Object(u.useState)(""),P=Object(a.a)(S,2),R=P[0],y=P[1],C=Object(u.useState)(null),F=Object(a.a)(C,2),T=F[0],J=F[1];Object(u.useEffect)((function(){p().then((function(e){c(e)}))}),[]);var q=function(e){console.log(o),console.log("FindPerson input:",e);var n=o.find((function(n){return n.name===e}));return console.log("Found:",n),n};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(d,{addPerson:function(e){if(e.preventDefault(),""!==f){var n={name:f,number:w};if(q(f)){if(window.confirm("'".concat(f,"' is already added to phonebook. Replace the number with a new one?"))){var t=o.find((function(e){return e.name===f})),a=Object(r.a)(Object(r.a)({},t),{},{number:w}),u=t.id;O(u,a).then((function(e){c(o.map((function(n){return n.id===u?e:n}))),J("Person '".concat(e.name,"' number changed!")),setTimeout((function(){J(null)}),5e3)})).catch((function(e){J("".concat(JSON.stringify(e.response.data.error))),console.log(e.response.data),setTimeout((function(){J(null)}),5e3)}))}console.log("Number update cancelled")}else v(n).then((function(e){c(o.concat(e)),J("Person '".concat(n.name,"' added!")),setTimeout((function(){J(null)}),5e3)})).catch((function(e){var n=JSON.stringify(e.response.data.error);J("".concat(n)),setTimeout((function(){J(null)}),5e3)})),console.log("New person added to phonebook:",n),h(""),k(""),y(""),console.log("Fields reset")}},name:f,handleName:function(e){h(e.target.value)},number:w,handleNumber:function(e){k(e.target.value)}}),Object(s.jsx)(b,{message:T}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(m,{name:R,handleName:function(e){y(e.target.value)}}),Object(s.jsx)("ul",{children:Object(s.jsx)(l,{numbers:""===R?o:o.filter((function(e){return e.name.toUpperCase().includes(R.toUpperCase())})),handleRemove:function(e){console.log("app.js / handleRemove / id:",e);var n=o.find((function(n){return n.id===e}));window.confirm("Remove '".concat(n.name,"' from phonebook?"))&&g(e).then((function(){var t=o.filter((function(n){return n.id!==e}));c(t),console.log("Person '".concat(n.name,"' removed from phonebook")),J("Person '".concat(n.name,"' removed from phonebook")),setTimeout((function(){J(null)}),5e3)})).catch((function(e){J("".concat(JSON.stringify(e.response.data.error))),setTimeout((function(){J(null)}),5e3)}))}})})]})});c.a.render(Object(s.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f24b1c7a.chunk.js.map